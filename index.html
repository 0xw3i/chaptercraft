<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <meta name="color-scheme" content="dark light" />
  <title>ChapterCraft — Translator Workspace</title>
  <link rel="stylesheet" href="/chaptercraft/style.css" />
</head>
<body>
  <a class="skiplink" href="#main">Skip to content</a>

  <!-- Top App Bar -->
  <header class="appbar" role="banner">
    <div class="appbar__left">
      <div class="brand" aria-label="ChapterCraft">
        <div class="brand__mark" aria-hidden="true">CC</div>
        <div class="brand__text">
          <div class="brand__name">ChapterCraft</div>
          <div class="brand__meta" id="projectMeta">No project</div>
        </div>
      </div>
    </div>

    <div class="appbar__center">
      <div class="progress">
        <div class="progress__row" aria-label="Progress">
          <div class="progress__bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="progress__fill" id="progressFill" style="width:0%"></div>
          </div>
          <div class="progress__text" id="progressText">0 / 0 (0%)</div>
        </div>
        <div class="status" id="saveStatus" aria-live="polite">Ready</div>
      </div>
    </div>

    <div class="appbar__right">
      <button class="iconbtn" id="btnToggleView" type="button" title="Toggle view">
        <span id="viewLabel">Focus</span>
      </button>
      <button class="iconbtn" id="btnOpenTools" type="button" aria-haspopup="dialog" aria-controls="toolsDrawer">
        Tools
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="shell" id="main">
    <!-- Setup -->
    <section class="card" id="setupCard">
      <div class="card__head">
        <h1 class="card__title">Project Setup</h1>
        <div class="chip" id="setupChip">Not loaded</div>
      </div>

      <div class="grid">
        <div class="field">
          <label for="projectName">Project name</label>
          <input class="input" id="projectName" autocomplete="off" placeholder="e.g. Novel Name — Volume 2" />
        </div>

        <div class="field">
          <label for="fileName">File name (required)</label>
          <input class="input" id="fileName" autocomplete="off" placeholder="e.g. chapter_064.txt" />
        </div>

        <div class="field">
          <label for="splitMode">Split by</label>
          <select class="input" id="splitMode">
            <option value="blanklines" selected>Blank lines (recommended)</option>
            <option value="lines">Every line</option>
          </select>
        </div>

        <div class="field">
          <label for="fontSize">Editor font</label>
          <select class="input" id="fontSize">
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17" selected>17</option>
            <option value="18">18</option>
            <option value="19">19</option>
          </select>
        </div>
      </div>

      <div class="area">
        <label class="area__label" for="rawText">Paste original text</label>
        <textarea class="textarea textarea--tall" id="rawText" placeholder="Paste chapter text here..."></textarea>
        <div class="hint">
          Tip: Keep paragraphs separated by blank lines for the cleanest splitting.
        </div>
      </div>

      <div class="row">
        <button class="btn btn--primary" id="btnLoad" type="button">Load & Start</button>
        <button class="btn" id="btnClearSetup" type="button">Clear Setup Fields</button>
      </div>
    </section>

    <!-- Focus Mode -->
    <section class="workspace" id="focusView" aria-label="Focus mode">
      <div class="focus">
        <div class="focus__top">
          <div class="focus__index" id="focusIndex">Index 0 / 0</div>
          <div class="focus__flags">
            <span class="pill" id="pillStatus">untranslated</span>
          </div>
        </div>

        <div class="split">
          <article class="pane" aria-label="Original text">
            <div class="pane__label">Original</div>
            <div class="pane__body" id="focusOriginal">Paste text in setup to begin.</div>
          </article>

          <section class="pane" aria-label="Translation editor">
            <div class="pane__label">Your translation</div>
            <textarea
              class="textarea textarea--editor"
              id="focusEditor"
              placeholder="Type translation here..."
              autocapitalize="sentences"
              autocomplete="off"
              spellcheck="true"
            ></textarea>

            <div class="minirow">
              <button class="btn btn--ghost" id="btnCopyOriginal" type="button">Copy original</button>
              <button class="btn btn--ghost" id="btnCopyTranslation" type="button">Copy translation</button>
              <div class="spacer"></div>
              <button class="btn btn--danger" id="btnClearOne" type="button">Clear</button>
              <button class="btn" id="btnSkipOne" type="button">Skip</button>
            </div>
          </section>
        </div>
      </div>
    </section>

    <!-- List Mode -->
    <section class="workspace" id="listView" aria-label="List mode" hidden>
      <div class="listhead">
        <div class="listhead__left">
          <div class="listhead__title">List view</div>
          <div class="listhead__sub">Search + filter + jump editing</div>
        </div>
        <div class="listhead__right">
          <input class="input input--search" id="search" placeholder="Search original or translation…" />
          <select class="input input--small" id="filter">
            <option value="all">All</option>
            <option value="untranslated">Untranslated</option>
            <option value="done">Done</option>
            <option value="skipped">Skipped</option>
          </select>
        </div>
      </div>

      <div class="list" id="list"></div>

      <div class="listfoot">
        <button class="btn" id="btnLoadMore" type="button">Load more</button>
        <div class="hint" id="listFootHint"></div>
      </div>
    </section>
  </main>

  <!-- Bottom Action Bar -->
  <nav class="bottombar" aria-label="Actions">
    <button class="barbtn" id="btnPrev" type="button" title="Previous (K / ←)">← Prev</button>
    <button class="barbtn barbtn--soft" id="btnJump" type="button" title="Jump to index">Jump</button>
    <button class="barbtn barbtn--soft" id="btnNextUntranslated" type="button" title="Next unfinished">Next Unfinished</button>
    <button class="barbtn barbtn--primary" id="btnNext" type="button" title="Next (J / →)">Next →</button>
  </nav>

  <!-- Tools Drawer -->
  <aside class="drawer" id="toolsDrawer" aria-hidden="true">
    <div class="drawer__panel" role="dialog" aria-modal="true" aria-label="Tools">
      <div class="drawer__head">
        <div>
          <div class="drawer__title">Tools</div>
          <div class="drawer__sub">Import/export, preferences, utilities</div>
        </div>
        <button class="iconbtn" id="btnCloseTools" type="button" aria-label="Close tools">✕</button>
      </div>

      <div class="drawer__body">
        <div class="section">
          <div class="section__title">Project</div>
          <div class="stack">
            <button class="btn" id="btnExport" type="button">Export project (JSON)</button>
            <button class="btn" id="btnImport" type="button">Import project (JSON)</button>
            <button class="btn btn--danger" id="btnReset" type="button">Reset (delete local data)</button>
          </div>
        </div>

        <div class="section">
          <div class="section__title">Preferences</div>
          <div class="stack">
            <div class="prefrow">
              <span>Theme</span>
              <button class="btn btn--ghost" id="btnTheme" type="button">Toggle</button>
            </div>
            <div class="prefrow">
              <span>Auto focus editor</span>
              <label class="switch">
                <input type="checkbox" id="autoFocus" />
                <span class="slider"></span>
              </label>
            </div>
            <div class="prefrow">
              <span>Progress counts “Skipped”</span>
              <label class="switch">
                <input type="checkbox" id="countSkipped" />
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="section__title">Clipboard</div>
          <div class="stack">
            <button class="btn" id="btnCopyAllCompleted" type="button">Copy all completed translations</button>
          </div>
        </div>
      </div>

      <div class="drawer__foot">
        <div class="drawer__footnote">Autosaves locally. No backend.</div>
      </div>
    </div>
    <div class="drawer__backdrop" id="drawerBackdrop"></div>
  </aside>

  <!-- Jump Sheet -->
  <aside class="sheet" id="jumpSheet" aria-hidden="true">
    <div class="sheet__panel" role="dialog" aria-modal="true" aria-label="Jump to index">
      <div class="sheet__head">
        <div>
          <div class="sheet__title">Jump to index</div>
          <div class="sheet__sub" id="jumpSub">Enter a number.</div>
        </div>
        <button class="iconbtn" id="btnCloseJump" type="button" aria-label="Close jump">✕</button>
      </div>

      <div class="sheet__body">
        <label class="field">
          <span class="field__label">Index</span>
          <input class="input" id="jumpInput" inputmode="numeric" pattern="[0-9]*" placeholder="e.g. 64" />
        </label>
        <div class="row">
          <button class="btn" id="btnJumpCancel" type="button">Cancel</button>
          <div class="spacer"></div>
          <button class="btn btn--primary" id="btnJumpGo" type="button">Go</button>
        </div>
      </div>
    </div>
    <div class="sheet__backdrop" id="jumpBackdrop"></div>
  </aside>

  <!-- Back to top (List only) -->
  <button class="toTop" id="toTop" aria-hidden="true" title="Back to top">↑</button>

  <script src="/chaptercraft/script.js"></script>
</body>
</html>

